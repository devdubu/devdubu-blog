---
slug: "개인-서버-기초-셋팅"
---
# Ubuntu

## OMZ 설치
```shell
sudo apt install -y zsh

chsh -s `which zsh`

echo $SHELL


curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh

```

## curl
### 설치
```shell
sudo apt-get install curl
```

## Git
### 설치
```shell
sudo apt-get install git
```

## nvm
### 설치
```shell
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash

source ~/.bashrc

nvm install node # 최신 버전 설치 
nvm install --lts # 최신 LTS 버전 설치 
nvm install 16.14.0 # 특정 버전 설치 
nvm install 16 # 특정 버전 16의 최신 릴리즈 설치
```

## docker

### 설치 x86
#### 아래 설치 버전은 이미 deplicate 됨
```bash
sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common


curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"

sudo apt-get install docker-ce docker-ce-cli containerd.io
```

### ARM 버전
```shell
sudo apt-get update

sudo apt-get install apt-transport-https \
    ca-certificates \
    curl \
    software-properties-common

curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add

sudo add-apt-repository "deb [arch=arm64] https://download.docker.com/linux/ubuntu  $(lsb_release -cs)  stable"

sudo apt-get update

sudo apt-get install docker-ce

sudo apt-get install docker-compose-plugin
```

### Docker 사용자 권한 추가
```shell
sudo su 
Password: root패스워드 

# 일반사용자에게 도커 사용권한 부여 
usermod -a -G docker 사용자ID 

# 예: 사용자 ID가 'test'일 경우 
usermod -a -G docker test
```

## openssh

### openssh 설치
```shell
sudo apt-get install openssh-server

# 활성화 확인
sudo systemctl status ssh
```
## ufw
### ufw 설치
```shell
# ufw 설치
sudo apt-get install ufw
```

### ufw 정책 관리 명령어
```shell
 # ufw 활성화
sudo ufw enable

 # ufw 비활성화
sudo ufw disable

 # ufw 상태 확인
sudo ufw status verbose
```

#### 모든 포트 통신에 대한 일괄 허용 / 차단
```shell
 # 들어오는 통신 차단
sudo ufw default deny incoming

 # 나가는 통신 허용
sudo ufw default allow outgoing
```

### ufw 정책 설정 명령어
```shell
 # 443포트(HTTPS) 허용
sudo ufw allow 443

 # 443포트(HTTPS) TCP 허용
sudo ufw allow 443/tcp

 # 443포트(HTTPS) UDP 허용
sudo ufw allow 443/udp

 # 443포트(HTTPS) 허용
sudo ufw allow https
```

### ufw 정책 세부 설정 명령어
#### ip 통신 정책
```shell
 # 192.168.0.5 IP의 통신 허용
sudo ufw allow from 192.168.0.5

 # 192.168.0.5 ~ 200 대역의 IP의 통신 허용
sudo ufw allow from 192.168.0.5/200

sudo ufw allow from 192.168.0.0/24

```

#### IP 및 포트 통신 정책
```shell
 # 192.168.0.5 IP의 443포트 허용
sudo ufw allow from 192.168.0.5 to any port 443

 # 192.168.0.100 IP의 443포트 TCP 허용
sudo ufw allow from 192.168.0.5 to any port 443 proto tcp
```

### ufw 정책 수정 명령어
```shell
sudo ufw status numbered

 # 1번 정책을 443포트 차단 정책으로 변경
sudo ufw insert 1 deny 443

 # 2번 정책을 192.168.0.5 IP의 통신 허용 정책으로 변경
sudo ufw insert 2 allow from 192.168.0.5
```

### ufw 정책 삭제 명령어
```shell
 # 1번 정책 삭제
sudo ufw delete 1
```

## mysql
### 설치
```shell
sudo apt update 
sudo apt install mysql-server
```

### 시작
```shell
sudo systemctl start mysql
```

### 자동 재시작
```shell
sudo systemctl enable mysql
```

## SSH Key 로만 접근 가능하게 설정하는 방법

`/etc/ssh/sshd_config`

```config
# Authentication:
...
PubkeyAuthentication yes
...
PasswordAuthentication no

```

## 종료
```shell
# 재부팅
shutdown -r now
# 즉시 종료
shutdown -h now
```

---

#Linux 