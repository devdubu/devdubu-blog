---
slug: "Docker-Swarm"
---
# Docker Swarm
:::question Docker Swarm?
- Docker 엔진에 내장된 클러스터 관리 및 오케스트레이션 기능을 갖춘 기술이다.
:::

- Swarm은 독립형 컨테이너와 달리, Swarm 서비스의 일부이며, Swarm 관리자가 관리하는 실행 중인 컨테이너 입니다.
- 서비스를 수동으로 다시 시작할 필요 없이 연결된 네트워크 및 볼륨을 포함하여 서비스 구성을 수정할 수 있다는 것입니다. 
- Docker는 구성을 업데이트하고, 오래된 구성으로 서비스 작업을 중지하고, 원하는 구성과 일치하는 새 작업을 생성합니다.
- Docker가 스웜 모드에서 실행되는 경우 스웜 서비스뿐만 아니라 스웜에 참여하는 모든 Docker 호스트에서 독립형 컨테이너를 계속 실행할 수 있습니다. 
- 독립형 컨테이너와 스웜 서비스의 주요 차이점은 스웜 관리자만 스웜을 관리할 수 있는 반면 독립형 컨테이너는 모든 데몬에서 시작할 수 있다는 것입니다. 
- Docker 데몬은 관리자, 작업자 또는 둘 다로서 떼에 참여할 수 있습니다.

# Node
노드는 Swarm에 참여하는 Docker 엔진의 인스턴스 입니다. 
이것을 Docker 노드로 생각할 수도 있습니다. 
단일 물리적 컴퓨터 또는 클라우드 서버에서 하나 이상의 노드를 실행할 수 있지만,
프로덕션 스웜 배포에는 일반적으로 여러 물리적 시스템과 클라우드 시스템에 분산된 Docker 노드가 포함됩니다.


## Master Node
- 애플리케이션을 떼에 배포하려면 서비스 정의를 **관리자 노드** 에 제출합니다 . 
- 관리자 노드는 작업이라는 작업 단위를 작업자 노드에 전달 [합니다](https://docs.docker.com/engine/swarm/key-concepts/#services-and-tasks) .
- 관리자 노드는 Swarm의 원하는 상태를 유지하는 데 필요한 오케스트레이션 및 클러스터 관리 기능을 수행합니다. 
- 관리자 노드는 오케스트레이션 작업을 수행할 단일 리더를 선출합니다.

## Worker Node
- **Worker Node는** Master Node에서 전달된 작업을 수신하고 실행합니다. 
- 기본적으로 Master Node는 서비스를 Worker Node로 실행하지만 관리자 작업을 독점적으로 실행하고 Master Node 전용으로 되도록 구성할 수 있습니다. 
- 에이전트는 각 작업자 노드에서 실행되고 할당된 작업에 대해 보고합니다. 
- Worker Node는 관리자가 각 작업자의 원하는 상태를 유지할 수 있도록 할당된 작업의 현재 상태를 Master Node에 통보합니다.

# Service & Task
- **Service는** 관리자 또는 작업자 노드에서 실행할 작업의 정의입니다. 
- 이는 군집 시스템의 중심 구조이자 군집과의 사용자 상호 작용의 기본 루트입니다.
- 서비스를 생성할 때 사용할 컨테이너 이미지와 실행 중인 컨테이너 내에서 실행할 명령을 지정합니다.
- **복제된 서비스** 모델 에서 떼 관리자는 원하는 상태에서 설정한 규모에 따라 노드 간에 특정 수의 복제 작업을 배포합니다.
- **글로벌 서비스** 의 경우 떼는 클러스터의 사용 가능한 모든 노드에서 서비스에 대해 하나의 작업을 실행합니다.
- **작업은** Docker 컨테이너와 컨테이너 내부에서 실행되는 명령을 전달합니다. 
- Swarm의 원자 스케줄링 단위입니다. 매니저 노드는 서비스 규모에 설정된 레플리카 수에 따라 워커 노드에 작업을 할당합니다. 
- 작업이 노드에 할당되면 다른 노드로 이동할 수 없습니다. 
- 할당된 노드에서만 실행될 수 있으며 그렇지 않으면 실패할 수 있습니다.

# Swarm 생성하기
```bash
docker swarm init --advertise-addr <Manager IP>
```
- `--advertise-addr`은 해당 주소를 통해서 관리자에 액세스 할 수 있어야 합니다.

# Swarm Node 추가


---

#Container

---