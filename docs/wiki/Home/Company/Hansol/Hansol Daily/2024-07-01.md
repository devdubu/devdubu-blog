---
sticker: emoji//1f4c6
종료 날짜: 2024-07-01
시작 날짜: 2024-07-01
분류: 노트
카테고리:
  - Application
특징:
  - Front
  - Test
---
# Vitest dom 시점 문제

## RealGrid 답변

new RealGrid.GridView("realgrid") 로 그리드 객체 생성 시 `<div data-type="RealGrid" class="h100p"></div>` 영역을 찾을 수없을때 발생하는 현상입니다.

시점 차이로 인해 `<div data-type="RealGrid" class="h100p"></div>` 영역이 생성되기 전에 그리드 객체가 생성되거나 그리드 객체 생성 시 해당 영역이 있는지 확인이 필요합니다.

객체 생성을 어떻게 적용하고 있는지 코드가 없기에 아래와 같은 방식으로 처리하고 있는건 아닌지 확인 부탁드립니다.

```jsx
//문제가 발생하는 예상 구현 방식
gridView = new RealGrid.GridView('<div data-type="RealGrid" class="h100p"></div>')

//div id 로 객체생성
<div id="realgrid"></div>

gridView = new RealGrid.GridView("realgrid");
```

감사합니다.

→ 어쩌피 `id` 값은 안된다는 걸로 확인

결국은 href로 해야하는데, 이러면 mount 되는 시점을 제어해야 하는데, 해당 시점을 제어할 수 있는 방법이 존재 하는가?

실제로 vue test util에서 사용되는 테스트는 왜 vue의 lifecycle hook을 사용하지 않는가?

## Vue test utils 공식 문서 왈

## 테스트를 위해서 알아둬야할 팁

### Shallow mounting

때때로 우리는 모든 컴포넌트의 의존 성들을 마운트 해줘야 하는 번거로움이 있습니다.

Vue Test Utils 는 자식 컴포넌트 없이 컴포넌트를 렌더링 하는 것을 허용합니다.

```jsx
import { shallowMount } from '@vue/test-utils'
import Component from '../Component.vue'

const wrapper = shallowMount(Component)
```

### LifeCycle

mount와 shallowMount 두 개의 방법을 사용하게 된다면, 당신은 예상할 수 있다. 컴포넌트들이 모든 라이프사이클 이벤트에 반응 한다고,

아 이놈들 업뎃을 안해놔 이씨

## Mount API()

### RenderToString

```html
<div class="contentPaddingBox h100p flex flex_d_c">
	<div class="flex flex_d_c h100p gap12">
		<div class="topTitleArea">
			<div class="leftArea">
				<h2 class="h2title">RealGrid Sample</h2>
			</div>
			<div class="rightArea">
				<button data-type="HButton-" type="button" class="btn btn_normal"><span class="mdi mdi-plus-box-outline">행추가</span></button>
				<button data-type="HButton-" type="button" class="btn btn_normal"><span class="mdi mdi-minus-box-outline">행삭제</span></button>
				<button data-type="HButton-" type="button" class="btn btn_normal"><span class="">수정된 데이터 가져오기</span></button>
				<button data-type="HButton-" type="button" class="btn btn_normal"><span class="mdi mdi-refresh">그리드 새로고침</span></button>
				<button data-type="HButton-" type="button" class="btn btn_normal"><span class="mdi mdi-content-copy">복사</span></button>
			</div>
		</div>
		<div data-type="RealGrid" class="h100p">
		</div>
	</div>
</div>
```

음 이짓을 하게 되도 안된다

# Vitest

해당 함수는 테스트의 생명 주기와 연관 되어 있습니다.

### beforeEach

- Type: `beforeEach(fn: ( ) => Awaitable<void>, timeout?: number)`

테스트를 불러오긴 전에 해당 context를 run 할 것을 불러오는 콜백 함수 입니다.
선택적으로 `timeout` 을 지정해서 사용이 가능합니다. 기본 값은 5s 입니다.

```tsx
import { beforeEach } from 'vitest'

beforeEach(async () => {
  // Clear mocks and add some testing data after before each test run
  await stopMocking()
  await addUser({ name: 'John' })
})
```