---
종료 날짜: 2024-04-16
시작 날짜: 2024-04-16
분류: 노트
카테고리:
  - Application
특징:
  - Front
sticker: emoji//1f4c6
---
# HTextArea

## `index.spec.ts`

```tsx
import { describe, it, expect } from 'vitest'
import { mount } from '@vue/test-utils'
import HTextarea from './index.vue'

describe('########### HTextarea UI 생성 테스트 ###########', () => {
    it('HTextArea component가 생성된다.', () => {
        const wrapper = mount(HTextarea, {
            props: {
                conf: {
                    type: 'input-textarea',
                    label: '테스트',
                    name: 'test',
                },
            },
        })
        expect(wrapper.attributes('data-type')).include('HTextarea-test')
    })
    it('HTextArea component에서 textarea 태그가 생성된다.', () => {
        const wrapper = mount(HTextarea, {
            props: {
                conf: {
                    type: 'input-textarea',
                    label: '테스트',
                    name: 'test',
                    placeholder: '테스트',
                },
            },
        })
        expect(wrapper.find('textarea').attributes('placeholder')).toBe('테스트')
    })
})

```

- `find` : 특정 DOM을 찾는 method
- `attributes` : 1 depth에서 특정 attribute를 표기 해주기 때문에, 껍데기를 판별하기에는 유용하지만, 내부 소스까지 출력 되는지에 대해서는 자세한 테스트가 필요함

`uigen/component/index.ts`

- mapping 된게 없다면, HContainer가 아닌 값을 내보내고, mappign 된 값이 있는데 안띄워 지는 거라면, HContainer라도 출력

`HLable`

input 컴포넌트에서 공통적으로 사용하는 Container 부분을 컴포넌트화를 시켜 해당 분에 slot을 가해서, component 넣기

```
자바스크립트 자료형에서 false로 반환되는 값은
"", null, undefined, 0, NaN 이 있고

나머지는 모두 true
```



# 플랫폼

플랫폼에서 configurable에 특징이라고 하면 화면을 그리는 행위 자체가 JSON이라고 말을 할 수 있다.

```tsx
/* ##################################################
# 화면명 : 시스템관리 > 화면 관리 > 화면 추가/수정
################################################### */
const view = {
    name: 'admin-prgm-edit',
    prgmCd: 'A10103',
    title: '화면 수정',
    type: 'form',
    api: {
        read: {
            url: '/api/admin/prgm/prgm-detail',
            params: {},
            callback: 'handleGetItem',
        },
        save: {
            url: '/api/admin/prgm/prgm-update',
            params: {},
            callback: 'handleSaveItem',
        },
        delete: {
            url: '/api/admin/prgm/prgm-delete',
            params: {},
            callback: 'handleDeleteItem',
        },
    },
    items: [
        {
            type: 'input-text',
            label: '화면CD',
            name: 'PROGRAM_CD',
            required: true,
            width: '50%',
        },
        {
            type: 'input-text',
            label: '화면명',
            name: 'PROGRAM_NM',
            required: true,
            width: '50%',
        },
        {
            type: 'selectbox',
            label: '회사',
            name: 'COMP_CD',
            list: [
                { COMP_CD: '22', COMP_NM: '한솔PNS' },
                { COMP_CD: '24', COMP_NM: '한솔제지' },
            ],
            displayValue: 'COMP_NM',
            codeValue: 'COMP_CD',
            width: '50%',
        },
        {
            type: 'input-text',
            label: '부문',
            name: 'DIVISION_CD',
            width: '50%',
        },
        {
            type: 'checkbox',
            label: '사용',
            name: 'USE_FL',
            width: '50%',
        },
        {
            type: 'selectbox',
            label: '카테고리',
            name: 'PROGRAM_CAT',
            api: '/api/code/list',
            params: { CODE_GRP_CD: 'SYS00003' },
            displayValue: 'CODE_NM',
            codeValue: 'CODE_CD',
            width: '50%',
        },
        {
            type: 'input-text',
            label: '화면URL',
            name: 'PROGRAM_URL',
            width: '100%',
        },
        {
            type: 'selectbox',
            label: '접속방법',
            name: 'DEVICE_TYPE',
            api: '/api/code/list',
            params: { CODE_GRP_CD: 'SYS00017' },
            displayValue: 'CODE_NM',
            codeValue: 'CODE_CD',
            width: '50%',
        },
        {
            type: 'selectbox',
            label: '유형',
            name: 'PROGRAM_TYPE',
            api: '/api/code/list',
            params: { CODE_GRP_CD: 'SYS00002' },
            displayValue: 'CODE_NM',
            codeValue: 'CODE_CD',
            width: '50%',
        },
        {
            type: 'checkbox',
            label: '전체공개',
            name: 'OPEN_ALL_FL',
            checkedValue: 'Y',
            uncheckedValue: 'N',
            width: '50%',
        },
        {
            type: 'checkbox',
            label: '시스템화면',
            name: 'ADMIN_FL',
            checkedValue: 'Y',
            uncheckedValue: 'N',
            width: '50%',
        },
        {
            type: 'input-textarea',
            label: '비고',
            name: 'PROGRAM_DESC',
            width: '100%',
            height: '300px',
        },
        {
            type: 'input-text',
            label: '입력자',
            name: 'INPUT_USER_NM',
            width: '50%',
            readOnly: true,
        },
        {
            type: 'input-text',
            label: '입력시간',
            name: 'INPUT_DT',
            width: '50%',
            readOnly: true,
        },
        {
            type: 'input-text',
            label: '수정자',
            name: 'UPDATE_USER_NM',
            width: '50%',
            readOnly: true,
        },
        {
            type: 'input-text',
            label: '수정시간',
            name: 'UPDATE_DT',
            width: '50%',
            readOnly: true,
        },
    ],
}

const func = {
    handleGetItem: function () {},
    handleSaveItem: function () {},
    handleDeleteItem: function () {},
}

export { view, func }
```

위와 같은 JSON으로 화면을 그릴 수 있다는 얘기 기도 하다.

위 JSON파일은 Grid라는 특정 파일 때문에 해당 옵션을 제공해야한다. 그렇기에, 아래처럼 Grid Page를 따로 제공을 해야하지만, 전체적으로 input, selectbox 등등의 옵션은 그에 반에 HTML에 있고, 사용 하는 스타일이 정해져있다보니, 그런 것들은 JSON으로 정의 하여, load 할 수 있다.

```tsx
<template>
    <HGrid :conf="gridConfiguration"></HGrid>
</template>

<script lang="ts" setup>
interface IBoardList {
    PARENTS_WRITING_CD: string | null
    RELEASE_START_DT: string
    INPUT_USER_NM: string
    UPDATE_USER_NM: string | null
    UPDATE_DT: string | null
    UPDATE_USER_ID: string
    FILE_GRP_ID: string | null
    INPUT_USER_ID: string
    INPUT_DT: string
    REPLY_DEPTH: null | string
    PRIVATE_FL: string
    INPUT_SIMPLE_DT: string
    COMT_CNT: number
    VISIT_COUNT: number | null
    LINK_URL: string | null
    RELEASE_END_DT: string
    WRITING_CD: string
    TAG: string | null
    TOP_FIX_FL: string
    NEW_FL: string
    FILE_COUNT: number
    BOARD_CD: string
    TITLE: string
    SYSCD: string | null
}

const func = {
    handleRowDoubleClick: function () {
        console.log('handleRowDoubleClick')
    },
    handleDataLoaded: () => {
        console.log('handleDataLoaded')
    },
}

const gridConfiguration: htype.IGridUi = {
    type: 'grid',
    title: '목록',
    name: 'boardList',
    columns: [
        { text: '제목', field: 'TITLE' },
        { text: '첨부파일', field: 'FILE_COUNT' },
        { text: '조회수', field: 'VISIT_COUNT' },
        { text: '등록자', field: 'INPUT_USER_NM' },
        { text: '등록시간', field: 'INPUT_DT' },
    ],
    events: {
        doubleClicked: 'handleRowDoubleClick',
        dataLoaded: 'handleDataLoaded',
    },
    api: {
        read: {
            url: '/api/board/list',
        },
    },
}

onBeforeMount(() => {
    huigen.loadAction(func)
})
</script>

```

`/board/post/[pcd].vue`

`onBeforeMount()` 옵션을 보게 된다면, 하단에 `huigen.loadAction(func)` 라는 옵션이 존재 한다.

이 부분에서 알 수 있듯이 해당 Load 되는 기능들은 `loadAction` 에 몰려 있다.

```tsx
function getComponentName(uiConf: any) {
    const ctype = uiConf?.type
    const matchedComponent = UI_MAPPER.find((element) => {
        if (element.platformUI === ctype) return element.targetUI
    })
    return matchedComponent?.targetUI ?? 'HContainer'
}

const UI_MAPPER = [
    { platformUI: 'container', targetUI: 'HContainer' },
    { platformUI: 'search-container', targetUI: 'HSearchContainer' },
    { platformUI: 'input-text', targetUI: 'HInputText' },
    { platformUI: 'selectbox', targetUI: 'HSelectbox' },
    { platformUI: 'button', targetUI: 'HButton' },
    { platformUI: 'grid', targetUI: 'HGrid' },
    { platformUI: 'input-textarea', targetUI: 'HTextarea' },
]

export default getComponentName
```

`utils/uigen/component/index.ts`

---

#Vue3 #Nuxt3 