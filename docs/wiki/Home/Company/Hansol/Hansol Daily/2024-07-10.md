---
sticker: emoji//1f4c6
종료 날짜: 2024-07-10
시작 날짜: 2024-07-10
분류: 노트
카테고리:
  - Application
특징:
  - Front
  - Nuxt3
---
# 할일

```jsx
import fetchMethod from '../fetch/useFetchMethod'
import { API_URL } from '../../constant'
import type { IUseHFetchLoginProps, IUseHFetchPrgmAuthProps } from '../fetch/useHFetch.type'
import { hservice } from '../../../../hcore'

const { post } = fetchMethod

// configurable crud service --------------------------------------
export const callCrudConfigurationApi = async (serviceId:string, params: any, mode:string) => {
    const cudServiceUrl = '/api/service/crud'
    const finalParams = {
        serviceId,
        serviceParam: createCrudParams(params, mode),
    }

    const { data } = await post(cudServiceUrl, finalParams)
    return data
}

export const callConfigurationApi = async(params:any, apiInfo:any,mode?:string) => {
    let _data:any

     if(mode === 'cud'){
        const cudData = params
        const result = await callRemoteApi(mode, apiInfo, cudData)

        _data = result?.data
    }else if(mode =<mark> 'C' || mode </mark>= 'U' || mode === 'D'){
        const result = await callRemoteApi(mode, apiInfo, params)       
        _data = result?.data

    }else{
        const _params = { ...apiInfo.params, ...params }
        const result = await callRemoteApi('R', apiInfo, _params)
        _data = result?.data
    }

    return _data

}

async function callRemoteApi(mode:string, apiInfo: any, _params: any) {
    let resultData
    
    const cudServiceUrl = '/api/service/crud' 
    
    console.log(apiInfo, _params)
    if (apiInfo?.url) {
        resultData = await post(apiInfo.url, _params)
    } else if (apiInfo?.serviceId) {
        const finalParams = {
            serviceId: apiInfo.serviceId,
            serviceParam: createCrudParams(_params, mode),
        }
        resultData = await post(cudServiceUrl, finalParams)
    } else {
        return
    }

    return resultData
}

export const createCrudParams = (params:any, mode:string) => {
    if(mode =<mark> 'C' || mode </mark>= 'U' || mode === 'D'){
        const crudParam = {
            [mode]: params
        }
        return crudParam 
    }else{
        return params
    }
}

```

`/hcore/data/http/configureationFetch/index.ts`

- create, update, delete → C, U, D 로 변경
- HGrid API 전체 변경
- Read 로직은 else로 모두 처리 해서 로직 개선