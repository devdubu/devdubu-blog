---
sticker: emoji//1f4c6
종료 날짜: 2024-04-03
시작 날짜: 2024-04-03
분류: 노트
카테고리:
  - Application
특징:
  - Front
  - Nuxt3
---
# Nuxt Extends
## Npm Package

extends를 사용하는 방식이라 core를 굳이 건드릴 이유는 없고, 상속의 개념이므로 overwirte를 하면 된다.

content 디렉토리가 호환 X

public 디렉토리에서 이미지를 끌어올 수 없음 이를 svg로 변환해야함

- 페이지도 마찬가지, component

## 정리

nuxt의 Extends 기능을 사용하다보니, 별다른 설정은 필요가 없음

우리가 설정 하는대로 진행하면 됨,,,

하지만, core 개발자와 demo 개발자 한정으로 설정이 다른 부분이 몇몇 보인다.

### core 개발자

#### package.json 에 대한 설정

core 개발자는 각종 npm에 관련해서 신경을 써야하는 부분이 더러 있다.

- `.npmignore` : 배포하지 않을 파일 목록 등록, `.gitignore` 와 똑같음
- `package.json`
    - `name` : 배포 될 모듈 명( npm 공식에 등록된 것과 구분될 명칭으로 지정 필요)
        - 먄약 모든 package를 private repository에 저장할 것이 아니라면 proxy(npm 공식 홈페이지를 바라봄) 때문에 명칭을 구분해야함.
    - `version` : 배포된 모듈의 버전
        - private repository에는 똑같은 버전에서는 publish가 안되는 설정이 있다 보니, `publish`를 할 때마다 배포를 달리 해야 한다.
    - `npm publish` : 배포 명령어
    - `publishConfig.registry` : 배포될 registry

```json
{
    "name": "hansol-web-vue",
    "version": "3.0.0-beta",
    ......
    
    "scripts": {
        ......
        "publish": "npm publish"
    },
    "publishConfig": {
        "registry": "<http://192.168.245.126:9081/repository/npm-hosted/>"
    },
    ...
}
```

#### npm 배포 관련 설정

docker registry와 마찬가지로 해당 pc에서 우선적으로 npm 로그인을 진행한 후에 배포를 할 수 있다.

```bash
npm login --registry <http://192.168.245.126:9081/repository/npm-hosted>
Username: ~~~~
Password:
Email: (this IS public)
```

:::note
💡 **주의 사항** 해당 설정은 **`user`** 디렉토리에 그대로 남아있기에, 해당 사항에 변동이 생긴다면 `.npmrc` 라는 파일을 삭제 후에 다시금 재 로그인을 진행하면 됩니다.
:::

### 주의점

core 개발자의 한정해서 주의 점은 해당 `node package` 로 이를 설정하게 된다면

`publish` , `content`디렉토리를 끌어오지 못하게 됩니다.

즉, 이미지 파일을 끌어오지 못하여, 이미지가 쓰이는 해당 `.vue` 파일에 `.svg` 파일로 이미지를 설정 해야 합니다.

그리고 `content` 파일에 쓰이는 부분을 쓰이지 못하여, 이 부분은 추후 재 고려가 필요합니다.

### demo 개발자

demo 개발자들에게 배포를 하기 위해서 `package.json` 에, dependancy에 표준웹 node pacakge 모듈을 넣어줍니다.

```json
{
	...
	,
	"dependencies": {
        "hansol-web-vue": "^3.0.0-beta", // 해당 위치에 넣어주면 됩니다.
        "@mdi/font": "^7.4.47",
        "@pinia/nuxt": "^0.5.1",
        "pinia": "^2.1.7",
        "pinia-plugin-persistedstate": "^3.2.1",
        "realchart": "^1.0.4"
    }
}
```

그리고 `.npmrc` 파일을 생성하고, 해당 파일에 registry 주소를 넣어줍니다.

```bash
registry = <http://192.168.245.126:9081/repository/npm>
```

:::note
💡 그 이외의 NPM 도 설치 해야 하나요?
:::

- core 안에서 컴포넌트로 감싼 라이브러리라면, 이외의 package를 쓸 필요가 없지만, 그 외에 직접적으로 사용해야 하는 것이라면 설치가 필요합니다.

예를 들어 `RealGrid`를 예를 들 때,

- core에서 `HGrid`라는 컴포넌트를 사용해서 컴포넌트 화를 하였고, 이를 demo에서 `HGrid`를 사용한다면,,
- demo에서 `package.json` 에 realgrid node module은 필요 없지만,
- realGrid를 직접 사용해야 할 일이 생긴다면, 따로 demo에서 설치가 필요합니다.

:::note
💡 **extends 설정**
:::

```tsx
export default defineNuxtConfig({
  extends: ['./node_modules/hansol-web-vue'], // 해당 부분을 수정하면 됩니다.
  devtools: { enabled: true },

  css: ['~/assets/scss/app.scss'],
  
  runtimeConfig: {
      public: {},
  },

  modules: [],

  content: {
      // 해당 부분은 호환이 되지 않습니다.
  },
})
```

```json
{
  // <https://nuxt.com/docs/guide/concepts/typescript>
  "extends": "./node_modules/hansol-web-vue/tsconfig.json", // ts 기본 설정은 core를 참조한다
  "ignorePatterns": [".eslintrc.cjs"], // .eslintrc.cjs 파일은 ts 에서 제외한다.
}
```

`tsconfig.json`