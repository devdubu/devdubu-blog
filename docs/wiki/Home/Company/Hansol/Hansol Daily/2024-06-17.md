---
sticker: emoji//1f4c6
종료 날짜: 2024-06-17
시작 날짜: 2024-06-17
분류: 노트
카테고리:
  - Application
특징:
  - Front
  - Nuxt3
---
# 할일

- RealGrid Vitest 구현
- Grid 외부 클릭 미 지원
    - 외부 클릭 이벤트는 미 지원이지만, `onCellClick` 자체적으로 구현
- HGrid 호환 되게 끔 설정
    - api가 잘못된 거라서, api 설정하니 해결

```tsx
gridView.onCellClicked = function (grid: any, clickData: any) {
	 console.log(clickData)

   if (clickData.column === 'isCheck') {
	   return
   }
   if (clickData.cellType === 'gridEmpty') {
	   // grid 외부 클릭시 cellType이 'gridEmpty' 상태가 됩니다.
	   gridView.commit()
	   // gridView.commit() 을 해야지 비로소 updated 상태로 변합니다.
	   return
   }

   gridView.beginUpdateRow(clickData.itemIndex)
   gridView.showEditor()
   gridView.setFocus()
}
```

- sample 페이지도 디자인 신경 써서 개발 진행하도록..

## Vitest

- chat lic, grid lic는 env에 몰아넣고 잘 작동됨을 확인

```tsx
[Vue warn]: A plugin must either be a function or an object with an "install" function.
```

- 검색 결과로서는 현재 해당 props의 값에서 api를 없앴더니 문제가 생기고
- api를 넣으면, 이상한 404에러가 뜬다.
- test의 범위 자체가 api 테스트를 하게 된다면, 내부 코어 까지 건드리지 않는 것 같다.
    - 결국 api test를 위해서는 mock 서버 까지 필요한건가?

### 결론

- 결국은 다른 건 문제가 아니고 라이센스 문제였다.
- 기본적으로 단위 테스트는 `<body>` 태그 안에 존재하는 것만 생성 가능하며, 그 외의 조건들은 생성이 안된다.
- 그러니 즉, `<head>` 태그 안에, 어떤 `src` 가 들어갔던 해당 컴포넌트에 `useHead` 를 쓰던 안된다는 뜻이다.
- 즉, 일부러 `<head>` 태그에 무언가를 넣어줘야한다는 소리다.
- 우연히 방법은 찾은 것 같다.

[Vitest](https://vitest.dev/config/#setupfiles)

setupFile을 생성하여 그 안에 script 파일을 넣는 것으로 해결 할 수 있을 거라는 가능성…

이 살짝 있다 이를 테스트를 해보긴 해야겠다.

## 샘플 페이지 구현

- 기존 AgGrid 샘플페이지와 동일한 방식으로 구현?

![Pasted-image-20250417174313.png](/img/이미지 창고/Pasted-image-20250417174313.png)

- 조회, 저장, 행 추가, 행 삭제 까지는 가능한 액션임
- 저장은 좀 시간이 걸릴 듯한 액션이 있음
- dialog를 건드려야 한다는 좀…
    - 현재 dialog가 아래 형식으로 구현이 되어 있는지에 대한 의문

![Pasted-image-20250417174413.png](/img/이미지 창고/Pasted-image-20250417174413.png)


# 내일 할일

- colunm align의 정체
- vitest setfile 셋팅 테스트