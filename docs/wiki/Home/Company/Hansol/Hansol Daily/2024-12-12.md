---
종료 날짜: 2024-12-12
시작 날짜: 2024-12-12
분류: 출장 - HD Electric
카테고리:
  - Application
특징:
  - Front
  - Vue3
sticker: emoji//1f4c6
---
# Grid 개인화

RealGrid에서는 해당 개인 화를 layout으로 덮어 씌우면서 처리하는 방식

즉, Column Group화를 진행할 때 사용하는 `setColumnLayout()` 을 이용해서 layout을 덮어 쓰는 방식이다.

아래의 예시 코드다

```tsx
let layout = gridView.saveColumnLayout()

gridView.setColumnLayout(layout)
```

위 `saveColumnLayout()` 함수를 이용하면, 현재 저장되어있는 layout 데이터를 가져온다.

이를 그대로 DB에 가져 오면 된다.

```sql
-- auto-generated definition
create table STD_USER_GRID_TB
(
    USER_ID        VARCHAR2(500)        not null,
    SYSCD          VARCHAR2(250)        not null,
    PROGRAM_CD     VARCHAR2(250)        not null,
    GRID_NAME      VARCHAR2(200)        not null,
    LAYOUT_NAME    VARCHAR2(200)        not null,
    COLUMN_STATE   CLOB                 not null,
    DEFAULT_LAYOUT CHAR default 'N'     not null,
    INPUT_USER_ID  VARCHAR2(500)        not null,
    INPUT_DT       DATE default SYSDATE not null,
    UPDATE_USER_ID VARCHAR2(500),
    UPDATE_DT      VARCHAR2(255),
    constraint UQ_STD_USER_GRID_TB
        unique (USER_ID, SYSCD, PROGRAM_CD, GRID_NAME, LAYOUT_NAME)
)
/

comment on table STD_USER_GRID_TB is '[표준웹] 사용자GRID개인화'
/

comment on column STD_USER_GRID_TB.USER_ID is '사용자UID'
/

comment on column STD_USER_GRID_TB.SYSCD is '시스템코드'
/

comment on column STD_USER_GRID_TB.PROGRAM_CD is '화면CD'
/

comment on column STD_USER_GRID_TB.GRID_NAME is 'GRID명'
/

comment on column STD_USER_GRID_TB.LAYOUT_NAME is '레이아웃명'
/

comment on column STD_USER_GRID_TB.COLUMN_STATE is '컬럼설정데이터(JSON)'
/

comment on column STD_USER_GRID_TB.DEFAULT_LAYOUT is '기본레이아웃여부'
/

comment on column STD_USER_GRID_TB.INPUT_USER_ID is '입력자UID'
/

comment on column STD_USER_GRID_TB.INPUT_DT is '입력시간'
/

comment on column STD_USER_GRID_TB.UPDATE_USER_ID is '수정자UID'
/

comment on column STD_USER_GRID_TB.UPDATE_DT is '수정시간'
/
```

위 파일은 현재 표준웹 2 기준의 Grid 이다.

User와 PCD 기준으로 Grid를 개인화를 진행했다

실제로 화면 칠 때는 이 개인 화도 공통으로 고려 해야 할 듯 하다.

# 다국어 변환 로직

```tsx
if(presentLocal.locale === 'ko-KR'){
	presentLocal = gridLocal['en-US']
}else{
	presentLocal = gridLocal['ko-KR']
}
RealGrid.setLocal(presentLocal)
```

# Sample Grid

- graph 영역 tree에만 적용
- 도움말 빼기
- header height 구현
- `index.vue` 와 `tree.vue` 샘플 파일 정리
- test 파일에서 해당 기능 테스트 진행

# Grid 셀 넓이 이슈

- `fitStyle` 을 `fill` 로 넣으면 `width: 80` 처럼 정해놓은 것들은 80으로 되고, 나머지 늘려야할 컬럼 넓이는 `fillWidth: 1` 로 넣으면 알아서 자동 확장을 해준다.

> layout 을 사용하는 경우 fillWidth의 우선순위가 layout으로 간다.

그래서 `fillWidth` 는 layout으로, `width` 는 column 속성으로 설정해야 제대로 설정 된다.

# Grid Height 자동

- slot 하나당 38px로 고정해서 calu 하기