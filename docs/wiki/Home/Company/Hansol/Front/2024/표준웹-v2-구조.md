---
시작 날짜: 2024-05-27
종료 날짜: 2024-05-27
sticker: emoji//1f311

slug: "표준웹-v2-구조"
---
# 표준웹 FrontEnd 구조
- 기본적인건 Nuxt2의 구조를 따라간다.
- pages / store 등등 기본적 구조는 동일


## 차이점
- 권한 체크가 들어 가야 하므로, Nuxt 상에서 해당 부분을 제어하는 부분이 존재한다.
	- `middleware` 파일에서 `menu-auth.js` 메인 로직인 것 같다.
		- 기본적으로 권한을 체킹하고 제외 되는 것들과 해야하는 것들을 판단하는 파일인듯
	- `nuxt.config.js`에서 middleware로 작용하는 파일이 `url-check` 부분이다.
- 기본적으로 nodejs 에서는 middleware를 거치며 진행하는 특성이 있다보니, 해당 특성도 nuxt에서 나타난 것 같다.
- 

![Pasted-image-20240119091759.png](/img/이미지 창고/Pasted-image-20240119091759.png)


**1. Server (어플리케이션의 모든 초기 request 시 실행)**

- 서버 시작 : nuxt start
- 생성 프로세스 시작 : nuxt generate
- Nuxt hooks
- serverMiddleware
- plugins(Server) : nuxt.config.js 정의된 순서대로
- nuxtServerInit :  Server의 첫 LifeCycle Hook. Entry Point의 Store Action을 위한 매서드. (index.js 에서만 정의가능)
- middleware : 페이지 컴포넌트 렌더링 전 호출. 렌더링 조건에 활용되며, 전역, 레이아웃, 페이지 등 각각에 정의가능
- validate : 페이지 컴포넌트 렌더링 전 호출. 동적 라우팅 파라미터(dynamic route parameter) 정의에 유용하다.
- asyncData, fetch : 페이지 컴포넌트 렌더링 전 매번 호출. 반환값이 컴포넌트 data() 프로퍼티에 병합(merge).
- beforeCreate, created : Vue LifeCycle 메서드. beforeCreate는 Vue 인스턴스 초기화 시 호출.
- new fetch : Vue 인스턴스 생성 이후 Store 갱신. (Nuxt 2.12 버전에 반영)
- render : routeContext. 상태 일렬화(Nuxt.js hook)
- render : route. HTML 렌더링(Nuxt.js hook)
- render : routeDone. HTML을 브라우저로 보냄
- generate : before. HTML 파일들을 생성 (Nuxt.js hook)
- generate : page. HTML 편집가능
- generate : routeCreated. Route 생성
- generate : done. 모든 HTML 생성완료

**2. Client (Nuxt 모드에 상관없이 브라우저에서 실행되는 LifeCycle)**

- HTML 파일을 받음. assets 로딩(.css, .js 등)
- Vue Hydration (JS 반영)
- middleware : 미들웨어 또는 라우트 미들웨어.
- plugins(Client) : nuxt.config.js 정의된 순서대로
- asyncData : 페이지 컴포넌트 로딩 전 호출. 비동기로 호출되며, 반환값이 컴포넌트 data() 프로퍼티에 병합(merge).
- beforeCreate, created : Vue LifeCycle 메서드. beforeCreate는 Vue 인스턴스 초기화 시 호출.
- new fetch : Vue 인스턴스 생성 이후 Store 갱신. (Nuxt 2.12 버전에 반영)
- beforeMount, mounted : Vue LifeCycle 메서드

**3. Navigate**(`<nuxt-link/>`, Client의 middleware 부터 동일하게 발생)
- middleware : 미들웨어 또는 라우트 미들웨어.
- asyncData : 페이지 컴포넌트 로딩 전 호출. 비동기로 호출되며, 반환값이 컴포넌트 data() 프로퍼티에 병합(merge).
- beforeCreate, created : Vue LifeCycle 메서드. beforeCreate는 Vue 인스턴스 초기화 시 호출.
- new fetch : Vue 인스턴스 생성 이후 Store 갱신. (Nuxt 2.12 버전에 반영)
- beforeMount, mounted : Vue LifeCycle 메서드


# 1/22
- UI framework는 vuetify 사용

- datepicker



# DB 관련 테이블 및 초기 데이터 생성
웹표준 로그인을 위해 기본 DB 스키마를 생성하고, 데이터를 생성해 줍니다.

- [DB script Repository](https://hansolpns-it.atlassian.net/wiki/spaces/WEBSTD/pages/4817808/DB#DB-script-Repository)
- [DB Schema 생성](https://hansolpns-it.atlassian.net/wiki/spaces/WEBSTD/pages/4817808/DB#DB-Schema-%EC%83%9D%EC%84%B1)
    - [ORACLE](https://hansolpns-it.atlassian.net/wiki/spaces/WEBSTD/pages/4817808/DB#ORACLE)
    - [MariaDB](https://hansolpns-it.atlassian.net/wiki/spaces/WEBSTD/pages/4817808/DB#MariaDB)
- [초기 데이터 생성](https://hansolpns-it.atlassian.net/wiki/spaces/WEBSTD/pages/4817808/DB#%EC%B4%88%EA%B8%B0-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%83%9D%EC%84%B1)

# DB script Repository

---

[stdweb / stdweb-dbscript · GitLab (hansol.com)](http://git.hansol.com:9000/stdweb/stdweb-dbscript "http://git.hansol.com:9000/stdweb/stdweb-dbscript")

# DB Schema 생성

---

2023년 3월 기준, ERD는 20220111_VUE_V2 폴더의 SQL을 사용하시기 바랍니다.

- 프로젝트에서 할당받은 DB에 필요한 테이블, 뷰, 시퀀스 등을 생성합니다.
- 아래 순서에 따라 sql을 실행시켜 주세요.


### ORACLE

- Table

[1] stdweb-oracle-table.sql
→ [1] stdweb-oracle-table-with-drop.sql : drop table sql이 포함된 파일입니다. 테이블 재생성을 원할 경우 이 파일을 실행시켜 주세요.
[1] stdweb-oracle-view.sql
[2] stdweb_oracle_table_comment.sql
- Sequence
[3] stdweb_oracle-sequence.sql
- Function, Procedure, Trigger
[4] stdweb-oracle-etc.sql
- default data 생성 procedure
[5] stdweb_oracle_default_data_vue.sql

### MariaDB

- Table

[A] stdweb-mariaDB-table.sql
[A] stdweb-mariaDB-view.sql
- Sequence
[B] stdweb_mariaDB-sequence.sql
- Function, Procedure, Trigger
[C] stdweb-mariaDB-etc.sql
- default data 생성 procedure
[D] stdweb_mariaDB_default_data_vue.sql

# 초기 데이터 생성

---

- STD_SYSDATA_CREATE_PROC 프로시저를 실행합니다.
- 파라미터
    - 시스템코드
    - 회사코드
    - 회사명
    - ECHO 연동 여부
        - ECHO 연동이 'Y'일 경우 ECHO 부서 정보를 사용하므로 표준웹에서 따로 회사 정보를 생성하지 않습니다.

```sql
STD_SYSDATA_CREATE_PROC('SYS', '99', '한솔회사', 'N'); 
STD_SYSDATA_CREATE_PROC('SYS', XXX', '회사명', 'N');
```


- 계정정보
    - 아이디 : system회사코드
        - 위와 같이 프로시저를 실행했을 경우 ‘system99’가 아이디가 됩니다.
        - 아이디는 항상 **영문소문자**이므로 회사코드에 대문자가 있을 경우 아이디는 소문자입니다.
        - 예) 회사코드 : ‘T99’ 아이디 : ‘systemt99’
    - 비밀번호 : 1234
