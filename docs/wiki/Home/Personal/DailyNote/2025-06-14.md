---
sticker: emoji//1f4c6
시작 날짜: 2025-06-14
종료 날짜: 2025-06-14
분류: 프로젝트
카테고리:
  - ParasiX
특징:
  - Back
---
# Backend 최종 구조

## `Guard`

현재의 Auth 를 기반으로 해당 페이지에 어느정도의 권한이 있는지 확인
이때 권한 체크는 사용자의 AuthList를 기반으로 판별하며, 해당 부근에서 판별하는 범위는
`RIDA` 기능을 판별합니다.

즉, request에서 auth 객체를 보고 판단하며, `isAuth`와 `Permission` 을 기반으로 판단한다.
:::error 이때 이게 구라면?
- 이때를 대비해서 Auth Id를 같이 포함하여 해당 정합성을 판단하는 로직까지 포함하기


:::

즉, 순서는 아래와 같다.
1. request에서 auth를 받는다.
2. Auth Id를 기반으로 해당 Auth를 DB에서 검색해서 정합성을 판단한다.
	1. 만약 틀리다면 튕기기
3. **해당 사용자에 대한 AuthList를 찾는다(Redis에서 꺼낸다)**
4. AuthList에서 request에서 받은 auth와 비교 후
	1. 틀리다면 튕기기
5. 로직 실행하게 한다.

## SearchAuth

:::tip 해당 개념은 조회시에, 권한이 필요한 구간을 말한다.

:::

현재까지는 Organization, Project, Menu에 한정해서 현재는 조회도 필터링을 건다.

추후에는 User와 Team 단위 까지 확대해서 적용하도록 한다.


### 로직 순서
1. 어떤 도메인인지 체크
	1. 조직, 프로젝트, 메뉴 등등 확인
	2. 어떤 도메인이냐의 따라서 `none`의 위치가 달라지기 때문
2. **사용자의 AuthList를 가져옵니다(Redis에서 해당 AuthList를 가져옴)**
3. 위에 도메인을 기반으로 AuthList를 Filter 합니다.
4. 해당 Filter된 AuthList를 기반으로 도메인 DB를 Search 합니다.



