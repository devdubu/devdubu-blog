---
sticker: emoji//1f4c6
---
# Auth 에 대한 정의

## OrgCd

> 조직 코드를 갖고 있을때, 즉 나머지 CD 값이 none 일 때를 의미함


특정 조직 코드를 가지고 있는 경우 해당 조직 코드의 권한은 아래까지의 영향권을 가짐
- 특정 조직의 RIDA 하는 권한을 가짐
- 특정 조직 산하의 프로젝트를 RIDA 하는 권한을 가짐
	- 프로젝트 정보 이외(메뉴, 페이지)는 RIDA 권한을 가질 수 없음

## ProjCD

> 프로젝트 코드를 갖고 있을때, 즉, 조직코드와 프로젝트 코드만 가지고 있고 이외는 none 일 때

특정 프로젝트를 가지고 있는 경우 특정 프로젝트에 대한 권한은 아래까지의 영향을 가짐
- 특정 프로젝트의 RIDA 하는 권한을 가짐
- 특정 프로젝트 산하에 있는 메뉴에 대한 RIDA 하는 권한을 가짐
	- 메뉴 정보 이외(페이지 정보)의 RIDA 권한을 가질 수 없음

## MenuCD

> 메뉴 코드를 갖고 있을 때, 즉, 조직, 프로젝트, 메뉴 코드를 가지고 있고, 페이지 코드는 none일 때

특정 메뉴를 가지고 있을 경우 특정 메뉴에 대한 권한을 아래까지만 영향을 가짐
- 특정 메뉴에 대한 RIDA하는 권한을 가짐
- 특정 메뉴 산하에 있는 페이지에 대한 RIDA하는 권한을 가짐

## PageCD

> 페이지 코드를 가지고 있는 경우
- 특정 페이지의 RIDA권한을 갖는 경우

# 권한 관련 테이블에 대한 재정의 필요

:::note 각종 CD 값에 앞으로 Permission들이 늘어날 것을 대비 하여서, 해당 Auth테이블은 분리에 대한 필요성을 느끼게 됨

:::

분리 하는 방향

Auth 테이블은 그대로 유지하는 대신 Permission은 분리

최종적으로 Auth - Permission 테이블로 분리


최종적으로 Auth - Permission


2개를 분리를 해놓으면, permission + auth

위는 권한에 대한 표면적인 내용이고 이를 통합하여 실제로 권한 관리에 사용될 테이블은 아래와 같다

Role - Auth 와 Permission에 대한 조합으로 테이블을 완성 시킴

Role Group - Role 을 하나로 묶어서 Group화 시킨 테이블

Team 테이블도 추가
User를 Group 화 시킨 것이라고 생각하면 됨

- Team 은 각 조직, 프로젝트 각각의 관리 대상에 들어가게 됨
	- 추후에 생각해보기



# 할일에 대한 정리

위 구분에 따라서 Schema에 대한 재 정의가 필요함
- [ ] DB Schema 개발 - 내가
- [ ] public에 대한 범위 고민
	- [ ] 로그인에 대한 public을 어떻게 정의 할 것인가?
	- [ ] public으로 하게 된다면, 해당 페이지는 어느정도 까지의 범위로 공개 할 것인가?
- [ ] 위 Auth 테이블의 CD 값에 속하는 값을 신규 생성 및 삭제 시 자동 추가 로직 개발
	- [ ] CD 값의 로직을 추가는 상관 없지만, 만약 삭제시 어떻게 행동하는게 옳은가?
		- [ ] Soft Delete?
		- [ ] Hard Delete?
	- [ ] 만약 CD 값이 Hard Delete 될 경우 대처 방안은 어찌 할 것인지?
- [ ] 조직간의 Tree 구조

## 프론트 POST API 규칙

```json
{
	"auth":{
		"ORG_CD": "PX-ORG-0",
		"PROJ_CD": "PX-PROJ-0",
		"MENU_CD": "PX-MNU-0",
	    "PAGE_CD": "PX-PAGE-0",
	}
	
    
}
```
















